import{r as i,u as b,a as w,j as e,A as S,m as n,N as C,S as y,I as B,B as d,C as U,b as D,F,c as L,d as A,e as E,f as I,g as k,h as R,i as P}from"./index-Dyyn7rfQ.js";import{B as T}from"./blogService-Czu4uxff.js";const M=()=>{const[t,c]=i.useState(null),[o,x]=i.useState(!0),[r,m]=i.useState(""),l=b();i.useEffect(()=>{window.scrollTo(0,0),h()},[]);const h=async()=>{try{const s=await T.fetchBlogsData();c(s)}catch(s){console.error("Failed to load blogs data:",s)}finally{x(!1)}},{visibleItems:u,isLoading:j,hasMore:f,loadingRef:p}=w({categories:(t==null?void 0:t.categories)||[],itemsPerPage:6}),g=s=>{s.indexUrl?l(`/blogs/${s.id}`):s.children&&s.children.length>0&&l(`/blogs/${s.id}`)},N=s=>{s.preventDefault(),r.trim()&&l(`/blogs/search?q=${encodeURIComponent(r.trim())}`)};return o?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("p",{children:"Loading blogs..."})}):t?e.jsx(S,{children:e.jsxs(n.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"min-h-screen bg-background text-foreground relative",children:[e.jsx(C,{}),e.jsx("main",{children:e.jsx("section",{className:"py-20 px-4 mt-30",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Blogs"}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto mb-8",children:"Explore articles on various topics. Dive deep into comprehensive guides and tutorials."}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("form",{onSubmit:N,className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(B,{type:"text",placeholder:"Search articles...",value:r,onChange:s=>m(s.target.value),className:"pl-10 w-64"})]}),e.jsx(d,{type:"submit",size:"sm",children:"Search"})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:u.map((s,v)=>e.jsx(n.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1*(v%3)},viewport:{once:!0},children:e.jsxs(U,{className:"h-full flex flex-col overflow-hidden hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>g(s),children:[e.jsxs(D,{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.indexUrl?e.jsx(F,{className:"h-5 w-5 text-blue-500"}):e.jsx(L,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.indexUrl?"Nested Structure":"Articles"})]}),e.jsx(A,{className:"text-2xl",children:s.title}),e.jsx(E,{children:s.description})]}),e.jsx(I,{className:"flex-grow",children:e.jsxs("div",{className:"space-y-4",children:[s.children&&s.children.slice(0,3).map(a=>e.jsxs("div",{className:"border-b pb-3 last:border-0",children:[e.jsx("h4",{className:"font-medium text-lg",children:a.title}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:a.description}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(a.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]},a.id)),!s.children&&s.indexUrl&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"Click to explore nested structure..."}),!s.children&&!s.indexUrl&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"More articles coming soon..."})]})}),e.jsx(k,{children:e.jsxs(d,{variant:"outline",className:"gap-2 w-full",children:[s.indexUrl?"Explore Structure":"View Articles",e.jsx(R,{className:"h-4 w-4"})]})})]})},s.id))}),f&&e.jsx("div",{ref:p,className:"flex justify-center mt-12",children:j&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),e.jsx("span",{children:"Loading more categories..."})]})})]})})}),e.jsx(P,{})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("p",{children:"Failed to load blogs"})})};export{M as default};
