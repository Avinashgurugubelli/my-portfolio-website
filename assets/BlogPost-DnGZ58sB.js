import{g,r as o,h as j,j as e,A as w,m as N,N as p,L as m,B as b,S as x,F as y}from"./index-CqrC0tq-.js";import{u as v,S as l,M as k,r as P,a as E}from"./index-BsnAUaby.js";import{A as S}from"./arrow-left-B2UC6q9w.js";import{C}from"./calendar-CD8Gh0CF.js";const L=async t=>{try{if(t.contentPath){const s=await fetch(t.contentPath);if(!s.ok)throw new Error(`Failed to load markdown from path: ${t.contentPath}`);return s.text()}if(t.contentUrl){const s=await fetch(t.contentUrl);if(!s.ok)throw new Error(`Failed to load markdown from URL: ${t.contentUrl}`);return s.text()}if(t.content)return t.content;throw new Error("No content source provided")}catch(s){return console.error("Error loading markdown content:",s),`# Error Loading Content

Sorry, we couldn't load the content for this article.`}},B=({post:t})=>{const{data:s,isLoading:a,error:c}=v({queryKey:["blogContent",t.id],queryFn:()=>L(t),staleTime:36e5});return a?e.jsxs("div",{className:"space-y-4",children:[e.jsx(l,{className:"h-6 w-full"}),e.jsx(l,{className:"h-6 w-5/6"}),e.jsx(l,{className:"h-6 w-4/6"}),e.jsx(l,{className:"h-6 w-full"}),e.jsx(l,{className:"h-6 w-3/6"})]}):c?e.jsxs("div",{className:"text-destructive",children:["Error loading content: ",c.message]}):e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:e.jsx(k,{remarkPlugins:[P],rehypePlugins:[E],children:s||""})})},D=()=>{const{categoryId:t,postId:s}=g(),[a,c]=o.useState(null),[i,h]=o.useState(null),[n,u]=o.useState(null);return o.useEffect(()=>{window.scrollTo(0,0),c(j)},[]),o.useEffect(()=>{if(a&&t){const r=a.categories.find(d=>d.id===t);if(h(r||null),r&&s&&r.children){const d=r.children.find(f=>f.id===s);u(d||null)}}},[a,t,s]),!i||!n?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("p",{children:"Loading blog post..."})}):e.jsx(w,{children:e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"min-h-screen bg-background text-foreground relative",children:[e.jsx(p,{}),e.jsx("main",{className:"pt-[120px]",children:e.jsxs("div",{className:"flex flex-col lg:flex-row max-w-7xl mx-auto",children:[e.jsxs("aside",{className:"w-full lg:w-64 p-6 lg:min-h-screen border-r",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(m,{to:`/blogs/${t}`,children:e.jsxs(b,{variant:"ghost",className:"gap-2 mb-4",children:[e.jsx(S,{className:"h-4 w-4"})," Back to ",i.title]})}),e.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Articles in ",i.title]}),e.jsx(x,{className:"mb-4"})]}),e.jsx("nav",{className:"space-y-2",children:i.children.map(r=>e.jsx(m,{to:`/blogs/${t}/${r.id}`,className:`block p-2 rounded-md text-sm hover:bg-accent hover:text-accent-foreground transition-colors ${r.id===s?"bg-accent/50 font-medium":""}`,children:r.title},r.id))})]}),e.jsxs("article",{className:"flex-1 p-6 lg:p-10 max-w-4xl",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:n.title}),e.jsxs("div",{className:"flex items-center text-muted-foreground mb-6",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),e.jsx("time",{children:new Date(n.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsx("p",{className:"text-xl text-muted-foreground",children:n.description}),e.jsx(x,{className:"my-6"})]}),e.jsx(B,{post:n})]})]})}),e.jsx(y,{})]})})};export{D as default};
